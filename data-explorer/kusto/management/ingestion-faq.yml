### YamlMime:FAQ
metadata:
  title: Azure Data Explorer ingestion FAQ 
  description: "Get answers to common questions about Azure Data Explorer ingestion."
  ms.date: 12/09/2021
title: Common questions about Azure Data Explorer ingestion
summary: This article answers commonly asked questions about Azure Data Explorer ingestion.
sections: 
  - name: Batching and data latencies
    questions:
      - question: How does batching affect my data?
        answer: |
          The batching manager buffers and batches ingress data based on the ingestion settings in the [ingestion batching policy](batchingpolicy.md). The ingestion batching policy sets batch limits according to three limiting factors, whichever is first reached: time elapsed since batch creation, accumulated number of items (blobs), or total batch size. The default batching settings are 5 minutes / 1 GB / 1000 blobs, meaning there will be at least a 5 minute delay when queueing a sample data for ingestion.
      - question: Should I use batching or streaming ingestion?
        answer: |
          Batching ingestion is optimized for high ingestion [throughput](../api/netfx/kusto-ingest-best-practices.md#optimizing-for-throughput. Streaming ingestion is ongoing data ingestion from a streaming source. Learn more about [batching versus streaming ingestion](../../ingest-data-overview.md#batching-vs-streaming-ingestion).
      - question: Do I need to change the batching policy?
        answer: |
          If default settings for the [ingestion batching policy](batchingpolicy.md) do not suit your needs, you can try lowering the batching policy `time`. See also [ingestion best practices - optimizing for throughput](../api/netfx/kusto-ingest-best-practices.md#optimizing-for-throughput). You should also update settings when you scale up ingestion. When you change batching policy settings, it can take up to 5 minutes to take effect. 
      - question: What causes batching latency?
        answer: |
          Ingestion latency can result from the [ingestion batching policy](batchingpolicy.md) settings, or a data backlog buildup. To address this, adjust the [batching policy settings](alter-database-batching-policy-command.md).
          Latencies that are part of the ingestion process can be [monitored](../../monitor-batching-ingestion.md).      
      - question: Where can I view batching latency metrics?
        answer: |
          To view ingestion latency metrics, see [monitoring ingestion latency](../../monitor-batching-ingestion.md#view-the-ingestion-latency). The metrics `Stage Latency` and `Discovery Latency` show latencies in the ingestion process, and reveal if there are any long latencies.
      - question: How can I shorten batching latencies? 
        answer: |
          You can [evaluate](batchingpolicy.md#batching-latencies) and [adjust settings in the batching policy](alter-databse-batching-policy-command.md) to address issues that cause latencies such as data backlogs, inefficient batching, batching very large amounts of uncompressed data, or ingesting very small amounts of data. 
      - question: How is batching data size calculated? 
        answer: |
          The batching policy data size is set for uncompressed data. When ingesting compressed data, the uncompressed [data size is calculated](batchingpolicy.md#batch-data-size) from ingestion batching parameters, zip files metadata, or factor over the compressed file size.
      - question: What happens if you try to ingest too high a throughput rate?
        answer: |
          If the [throughput](../api/netfx/kusto-ingest-best-practices.md#optimizing-for-throughput) rate is so high that Azure Data Explorer cannot adequately access storage, a large number of ingestion 
          failures may be generated, with the error `MaxRetryExceeded` in the Event Grid ingestion flow.  
          To solve this, use a premium storage account or divide the ingested data over several storage accounts.  
  - name: Ingestion monitoring, metrics, and errors
    questions: 
      - question: How can I monitor ingestion issues?
        answer: |
          You can monitor ingestion [using metrics](../../using-metrics.md#ingestion-metrics), and by [setting up and using ingestion diagnostic logs](../../using-diagnostic-logs.md) for detailed table-level monitoring, viewing detailed ingestion error codes, and so on. 
          You can select specific metrics to track, choose how to aggregate your results, and create metric charts to view on your dashboard. See more about [streaming metrics](../../using-metrics.md#streaming-ingest-metrics) and [batching metrics](../../monitor-batching-ingestion.md).
      - question: Where can I view insights about ingestion?
        answer: |
          You can use the portal's [Azure Monitor Insights](/azure/azure-monitor/insights/data-explorer?toc=/azure/data-explorer/toc.json&bc=/azure/data-explorer/breadcrumb/toc.json) to help you understand how Azure Data Explorer is performing and how it's being used.
          The Insight view is based on [metrics](../../using-metrics.md) and [diagnostic logs](../../using-diagnostic-logs.md) that can be streamed to a [Log Analytics workspace.](/azure/azure-monitor/platform/data-platform-logs).  
      - question: Where do I check ingestion errors?
        answer: |
          The full ingestion process can be monitored using ingestion [metrics](../../using-metrics.md) and [diagnostic logs](../../using-diagnostic-logs.md). 
          The [`.show ingestion failures`](ingestionfailures.md) command shows ingestion failures that occur specifically in the Kusto Data Engine. 
  - name: SDKs and connectors
    questions:     
      - question: How can I improve ingestion with SDKs?
        answer: |
          When ingesting via SDK, you can use the ingestion [batching policy settings to improve performance](../../net-sdk-ingest-data.md). 
          Try incrementally decreasing the size of data ingested in the table or database batching policy down towards 250 MB and check if there is an improvement.
      - question: How can I tune Kusto Kafka Sink for better ingestion performance?
        answer: |
          [Kafka Sink](https://github.com/Azure/kafka-sink-azure-kusto/blob/master/README.md) users should [tune the connector](../../ingest-data-kafka.md) to work together with the [ingestion batching policy](batchingpolicy.md) by tuning batching time, size, and item number. 